function gridsterFormatRenderCodesRemoveTempname(a){if("string"==typeof a&&a.length>0){if(/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){var b=JSON.parse(a),c=b[0].tempname;return a=a.replace('{"tempname":"'+c+'"},',"")}return a}}function gridsterRenderCodesTempnameValue(a){if("string"==typeof a&&a.length>0){if(/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return JSON.parse(a)[0].tempname}return""}}function gridsterHtmlUnescape(a){if("string"==typeof a&&a.length>0)return a.replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">")}function gridsterHtmlEscape(a){if("string"==typeof a&&a.length>0)return a.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function gridsterStrToSlug(a){if("string"==typeof a&&a.length>0){for(var b=new RegExp("[`~!+%@#$^&*()=|{}':;',\\[\\].<>/?~！@#￥……&*（）&;|{}【】\"；：”“'。，、？]"),c="",d=0;d<a.length;d++)c+=a.substr(d,1).replace(b,"");return c=c.replace(/\s/g,"-").toLowerCase()}}function gridsterContent(a,b,c){if(!("string"==typeof a&&a.length>0))return c;var d=a.replace(/{rqt:}/g,'"');if("id"==b){var e=d.match(/row\",\"(.+?)\"\]/g);if(null!=e)return e[0].replace('row","',"").replace('"]',"")}if("name"==b){var e=d.match(/widgetname\",\"(.+?)\"\]/g);if(null!=e)return e[0].replace('widgetname","',"").replace('"]',"")}if("content"==b){var e=d.match(/rowcontent\",\"(.+?)\"\]/g);if(null!=e)return e[0].replace('rowcontent","',"").replace('"]',"")}}function gridsterColsContent(str,type,index){if(index<1&&(index=1),index-=1,"string"==typeof str&&str.length>0){var nstr=str.replace(/{rowqt:}/g,'"'),result="";nstr=eval(nstr);var ia=nstr[index],rescontent=[];for(var j in ia)rescontent.push("[{rqt:}"+ia[j][0]+"{rqt:},{rqt:}"+ia[j][1]+"{rqt:}]");if("length"==type&&(result=nstr.length),"col"==type&&(result=nstr[index][0][1]),"name"==type&&(result=nstr[index][1][0]),"form_id"==type){result=nstr[index][1][0].split("|")[0]}return"content"==type&&(result="{"+nstr[index][0][1]+"}["+rescontent+"]"),result}return""}function gridsterItemRowTextareaInit(a,b){jQuery(document).ready(function(){if("[object Array]"===Object.prototype.toString.call(a)){var c="";cid=["3_4","1_4","2_3","1_3","4__1","4__2","4__3","4__4","3__1","3__2","3__3","2__1","2__2","1__1"];for(var d in a)for(var e in cid)a[d].toString().indexOf(cid[e])>=0&&(c=a[d].toString(),c=c.replace("{"+cid[e]+"}",""),jQuery("#col-item-"+cid[e]+"---"+b).val(gridsterHtmlUnescape(c)))}})}function gridsterFormatAllCodes(a){var b=a.toString();return b=b.replace(/{rqt:}/g,"{rowqt:}").replace(/{cqt:}/g,"{rowcqt:}").replace(/{apo:}/g,"{rowcapo:}").replace(/&amp;/g,"&").replace(/amp;/g,"").replace(/"/g,"{rowqt:}")}function gridsterRowUID(){return Math.floor(1e4*Math.random())}function gridsterItemElementsBTStatus(a){jQuery(document).ready(function(){setTimeout(function(){jQuery(".widget-item-btn").each(function(){var b=jQuery(this).data("slug"),d=(jQuery(this).data("id"),jQuery(this).data("name")),e=jQuery(this).data("elements-target"),f=jQuery("#"+e),g=f.find(".add-elements-btn"),h=f.find("textarea").val();f.length>0&&f.find("textarea").length>0&&h.indexOf(b+"|")>=0&&h.indexOf("uix_pb_section_undefined")<0&&(0==a&&g.after(jQuery(this).clone().addClass("used").text(d)).hide(),f.addClass("used"))})},100)})}function gridsterGetTinymceContent(){var a="content";return jQuery("#wp-"+a+"-wrap").hasClass("tmce-active")?tinyMCE.get(a).getContent({format:"raw"}):jQuery("#"+a).val()}function gridsterAddShortcutButtons(){!function(a){"use strict";var b=a("#uix-page-builder-themepreview").contents();jQuery.fn.UixPBSimulateClick=function(){return this.each(function(){if("createEvent"in document){var a=this.ownerDocument,b=a.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,a.defaultView,1,0,0,0,0,!1,!1,!1,!1,0,null),this.dispatchEvent(b)}else this.click()})},a(function(){b.find("#wpadminbar").css("visibility","hidden"),b.find(".uix-page-builder-section > .uix-pb-row > div").each(function(b){var c=parseFloat(a(this).closest(".uix-page-builder-section").data("pb-section-id")),d=a(this).index();a("#uix-page-builder-gridster-widget-"+c);a(this).append('<a data-id="'+c+'" data-index="'+d+'" class="uix-page-builder-editicon" href="javascript:void(0);" role="button"><i class="fa fa-edit"></i></a>')}),b.find(".uix-page-builder-section > .uix-pb-row > div").on("mouseenter",function(){var b=parseFloat(a(this).closest(".uix-page-builder-section").data("pb-section-id")),d=(a(this).index(),a("#uix-page-builder-gridster-widget-"+b));a(".uix-page-builder-gridster-widget").removeClass("hover"),d.addClass("hover"),a(this).find("> div").addClass("editmode"),a(this).css({"-webkit-box-shadow":"none","-moz-box-shadow":"none","box-shadow":"none"})}).on("mouseleave",function(){a(this).find("> div").removeClass("editmode"),a(this).css({"-webkit-box-shadow":"none","-moz-box-shadow":"none","box-shadow":"none"})}),b.find(".uix-page-builder-editicon").on("click",function(){var b=parseFloat(a(this).data("id")),c=parseFloat(a(this).data("index"));return a("#uix-page-builder-gridster-widget-"+b).find(".sortable-list > li:eq( "+c+" ) .widget-item-btn.used").UixPBSimulateClick("click"),!1}),b.find(".uix-page-builder-section form").on("submit",function(a){a.preventDefault(),alert(uix_page_builder_layoutdata.send_string_formsubmit_info)})})}(jQuery)}function UixPBFormatRenderSeparateModuleCode(a){return a}function UixPBFormatRenderCodes(a){var b=a.toString();return b=b.replace(/&amp;/g,"&").replace(/amp;/g,"").replace(/{rowcsql:}/g,"[").replace(/{rowcsqr:}/g,"]")}!function(a){"use strict";a(function(){a(document).on("click",".uix-page-builder-res-selector li",function(b){b.preventDefault();var c=a(window),d=a("#uix-page-builder-themepreview"),e=c.width(),f=c.height(),g=d.hasClass("active")?0:a("#uix-page-builder-gridster-wrapper").width(),h=a(this).data("size")[0],i=a(this).data("size")[1]>f?f:a(this).data("size")[1],j=(f-i)/2,k=d.hasClass("active")?(e-h)/2:(e-g-h)/2;a(".uix-page-builder-res-selector li").removeClass("active"),a(this).addClass("active"),0==h?d.css({width:e-g+"px",height:f+"px","margin-top":0,"margin-left":0}).removeClass("res"):d.css({width:h+"px",height:i+"px","margin-top":j+"px","margin-left":k+"px"}).addClass("res")}),a(document).on("click","#uix-page-builder-themepreview-btn-close",function(b){b.preventDefault();var c=parseFloat(a("#uix-page-builder-themepreview").css("left")),d=a("ul.uix-page-builder-res-selector, .uix-page-builder-gridster-addbtn.visualBuilder, #uix-page-builder-visualBuilder-loader, #uix-page-builder-gridster-wrapper.visualBuilder, #uix-page-builder-themepreview, .uix-page-builder-themepreview-btn, .uix-page-builder-themepreview-btn#uix-page-builder-themepreview-btn-close");0==c?d.removeClass("active"):d.addClass("active"),a(".uix-page-builder-res-selector li.active").trigger("click")}),a(document).on("mouseenter",".uix-page-builder-visual-mode",function(){var b=a('[name="post_title"]').val().replace(/&/g,"{and}").replace(/\s/g,"{space}"),c=a(this).attr("href");b.length>0&&a(this).attr("href",c+"&post_title="+encodeURI(b))}),a(document).on("mouseenter","#uix-page-builder-gridster-wrapper",function(){a(".uix-page-builder-gridster-widget").removeClass("hover")}),a(document).on("mousedown",".uix-page-builder-visual-mode",function(){a(window).unbind()}),a(document).on("click",".widget-item-btn",function(b){b.preventDefault();var c=a(this).data("slug"),d=a(this).data("id"),e=a(this).data("name"),f=a(this).data("elements-target"),g=a("#"+f).find(".add-elements-btn"),h=a("#"+f).find("textarea").val();if("none"!=g.css("display")&&(g.after(a(this).clone().addClass("used").text(e)).hide(),a("#"+f).find("textarea").length>0)){if(h.indexOf("uix_pb_section_undefined")>=0){var i=h.replace("uix_pb_section_undefined",c).replace("uix_pb_undefined",c+"_temp");a("#"+f).find("textarea").val(i);var j=new UixPBGridsterMain;j.itemSave(d),j.formDataSave()}var k=a("#"+f).find("textarea").val();k.indexOf(c)>=0&&k.indexOf("uix_pb_section_undefined")<0&&a("#"+f).addClass("used")}a(document).UixPBFormPopSwitchTransition()}),a(document).on("click","#uix-page-builder-layoutdata, .uix-page-builder-gridster-widget .content-box, .uix-page-builder-gridster .temp-data-1, .uix-page-builder-gridster .temp-data-2, .sortable-list .row textarea",function(){a(this).select()}),a(document).on("click",".widget-items-col-container a",function(b){a(this).parent().parent().hide()}),a(document).on("click",".add-elements-btn",function(b){b.preventDefault();var c="#"+a(this).data("elements");a(".uixpbform-modal-mask").fadeIn("fast"),a(c).addClass("active"),a(c).find(".content").animate({scrollTop:10},100),a("html").css("overflow-y","hidden"),a(".uixpbform-modal-box .close-uixpbform-modal").on("click",function(b){b.preventDefault(),a(document).UixPBFormPopSwitchTransition(),a(".uixpbform-modal-mask").fadeOut("fast")})}),a(document).on("click",".uix-page-builder-gridster-widget .dashicons.settings",function(b){b.preventDefault(),a(".settings-wrapper").hide();var c=a(this).next(".settings-wrapper");c.show(),c.find(".close").on("click",function(a){c.hide()})}),a(document).on("click",".uix-page-builder-gridster-drag",function(b){b.preventDefault(),a(".settings-wrapper").hide()}),a(document).on("mouseenter",".sortable-list .row",function(b){b.preventDefault(),a(".settings-wrapper").hide()}),a(document).on("click",".uix-page-builder-gridster-addbtn .export-temp, .uix-page-builder-gridster-addbtn .select-temp, .uix-page-builder-gridster-addbtn .save-temp",function(b){b.preventDefault();var c=a(this).next(".settings-temp-wrapper");c.show(),1!=uix_page_builder_layoutdata.send_string_vb_mode&&a(".uixpbform-modal-mask").show(),c.find(".close, .export").on("click",function(){c.hide(),a(".uixpbform-modal-mask").hide()})}),a(document).on("click",".uix-page-builder-gridster-addbtn .select-temp",function(b){b.preventDefault(),a.ajax({url:ajaxurl,type:"POST",data:{action:"uix_page_builder_metaboxes_loadtemplist_settings",postID:uix_page_builder_layoutdata.send_string_postid,security:uix_page_builder_layoutdata.send_string_nonce},success:function(b){return a("#uix-page-builder-templatelist").html(b),""==b||"<p>Hmm... no templates yet.</p>"==b?a("#uix-page-builder-templatelist-confirm").hide():a("#uix-page-builder-templatelist-confirm").show(),!1},beforeSend:function(){a("#uix-page-builder-templatelist").html(uix_page_builder_layoutdata.send_string_loadlist),a("#uix-page-builder-templatelist-confirm").hide()}})}),a(document).on("click",".settings-temp-wrapper .confirm",function(b){b.preventDefault();var c=a(this),d=a(this).closest(".settings-temp-wrapper").find('[name="temp"]:checked').parent().find("textarea").html(),e=gridsterRenderCodesTempnameValue(d);c.next(".spinner").addClass("is-active"),d=gridsterFormatRenderCodesRemoveTempname(d),a.ajax({url:ajaxurl,type:"POST",data:{action:"uix_page_builder_metaboxes_loadtemp_settings",curlayoutdata:d,tempname:e,postID:uix_page_builder_layoutdata.send_string_postid,security:uix_page_builder_layoutdata.send_string_nonce},success:function(b){var d=b.toString().replace(/\\/g,"").replace(/""/g,"").replace(/:,/g,':"",'),e=new UixPBGridsterMain;e.editRow(JSON.parse(d));var e=(jQuery("[name='uix-page-builder-layoutdata']").val(),new UixPBGridsterMain);return e.renderAndSavePage(2),c.parent().hide(),a(".uixpbform-modal-mask").hide(),c.next(".spinner").removeClass("is-active"),!1}})}),a(document).on("click",".settings-temp-wrapper .save",function(b){b.preventDefault();var c=a(this),d=a("[name='uix-page-builder-layoutdata']").val(),e=a(this).closest(".settings-temp-wrapper").find('[name="tempname"]').val();return c.next(".spinner").addClass("is-active"),a.ajax({url:ajaxurl,type:"POST",data:{action:"uix_page_builder_metaboxes_savetemp_settings",curlayoutdata:d,tempname:e,postID:uix_page_builder_layoutdata.send_string_postid,security:uix_page_builder_layoutdata.send_string_nonce},success:function(b){c.parent().hide(),a(".uixpbform-modal-mask").hide(),c.next(".spinner").removeClass("is-active")}}),!1}),a(document).on("click","#uix-page-builder-templatelist .close-tmpl",function(b){b.preventDefault();var c=a(this).data("del-id"),d=a("#"+c).html();a.ajax({url:ajaxurl,type:"POST",data:{action:"uix_page_builder_delContentTemplate_settings",tempName:d,security:uix_page_builder_layoutdata.send_string_nonce},success:function(b){return a("#"+c).closest("label").remove(),!1}})}),a(document).ready(function(){function h(){a(c).slideDown(300).css("width","100%"),a(e).slideUp(300),j()}function i(){a(c).slideUp(300),a(e).slideDown(300).css("width","100%"),j()}function j(){a("html, body").animate({scrollTop:10},100),a("html, body").delay(300).animate({scrollTop:5},100),a(".uix-page-builder-gridster ul").css("width","100%")}var b=["#postdivrich"],c="",d=a("input[name='uix-page-builder-status']:checked").attr("id"),e="#uix_page_builder_page_meta_pagerbuilder_container";a(".postbox").each(function(){a(this).attr("id").indexOf("dis_page_builder")>=0&&b.push("#"+a(this).attr("id"))});for(var f=0,g=b.length;f<g;f++)c+=b[f]+",";c=c.substring(0,c.length-1),"uix-page-builder-status2"==d?h():i(),a("#uix-page-builder-status1").on("click",function(){i(),gridsterGetTinymceContent().indexOf("[uix_pb_sections")<0&&wp.media.editor.insert("[uix_pb_sections]"),1==uix_page_builder_layoutdata.send_string_tempfiles_exists&&a('[name="page_template"] option[value="tmpl-uix_page_builder.php"]').attr("selected","selected")}),a("#uix-page-builder-status2").on("click",function(){h(),1==uix_page_builder_layoutdata.send_string_tempfiles_exists&&a('[name="page_template"] option[value="default"]').attr("selected","selected")})})})}(jQuery),function(a){var b={};a.UixPBTmpl=function a(c,d){var e=/\W/.test(c)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+c.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):b[c]=b[c]||a(null===document.getElementById(c)?'<div data-tmpl="0"></div>'+c:document.getElementById(c).innerHTML);return d?e(d):e},a.fn.UixPBTmpl=function(b,c){return this.each(function(){var d=a.UixPBTmpl(b,c);a(this).html(d).promise().done(function(){a("#uix-page-builder-themepreview").load(function(){a(this).contents().text().search("[uix_pb_sections]")>0&&a(document).UixPBRenderWPShortcode({postID:uix_page_builder_layoutdata.send_string_postid})})})})}}(jQuery),function(a){a.fn.UixPBRenderPage=function(b){var c=a.extend({enable:0,frameID:"#uix-page-builder-viewport-preview-tmpl",previewID:"#uix-page-builder-viewport-preview-container",tmplID:"uix_page_builder_viewport_preview_tmpl",previewURL:uix_page_builder_layoutdata.send_string_preview_url},b);this.each(function(){var d=(a(this),c.enable),e=c.frameID,f=c.previewID,g=c.tmplID,h=c.previewURL,i="&cache="+(new Date).getTime()+"a"+Math.random();0==d&&(a(e).load(uix_page_builder_layoutdata.send_string_plugin_url+"admin/preview/viewport.html",function(b,c,d){a(f).UixPBTmpl(g,{url:h+i})}),uix_page_builder_layoutdata.send_string_render_count++),2==d&&a(document).UixPBRenderWPShortcode({postID:uix_page_builder_layoutdata.send_string_postid}),a("#uix-page-builder-visualBuilder-loader, #uix-page-builder-visualBuilder-loader .loader").hide()})}}(jQuery),function(a){a.fn.UixPBRenderHTML=function(b){var c=a.extend({divID:"#section_0000000__2__1",value:"undefined"},b);this.each(function(){var d=(a(this),c.divID),e=UixPBFormatRenderCodes(c.value),f=a("#uix-page-builder-themepreview").contents().find(d);a(document).on("click",".uixpbform-modal-save-btn",function(a){a.preventDefault(),f.next(".uix-page-builder-editicon").addClass("active")}),uixpbform_per_module_has_shortcode(e)||f.html(UixPBFormatRenderSeparateModuleCode(e))})}}(jQuery),function(a){a.fn.UixPBRenderWPShortcode=function(b){var c=a.extend({postID:"1234"},b);this.each(function(){var d=(a(this),c.postID);a("#uix-page-builder-themepreview").contents().find(".uix-page-builder-themepreview-wp-shortcode").load(ajaxurl+"?action=uix_page_builder_output_frontend_settings&post_id="+d+"&pb_render_entire_page=1",function(b,c,d){var e=a(this);gridsterAddShortcutButtons(),e.find(".uix-page-builder-map-preview-container").filter(function(b){var c=a(this),d=c.parent("div").attr("class"),e=c.data("height");c.prev(".uix-page-builder-map-preview-tmpl").load(uix_page_builder_layoutdata.send_string_plugin_url+"admin/preview/map.html",function(b,f,g){b=b.replace(/\<script([^>]+)\>/g,"").replace(/\<\/script\>/g,""),void 0!==d&&d.indexOf("full")>0&&(c.css("height",a(window).height()+"px"),e="100%"),c.UixPBTmpl(b,{pluginPath:uix_page_builder_layoutdata.send_string_plugin_url,width:c.data("width"),height:e,style:c.data("style"),latitude:c.data("latitude"),longitude:c.data("longitude"),zoom:c.data("zoom"),name:c.data("name"),marker:c.data("marker")})})})})})}}(jQuery);