
(function($){"use strict";$(function(){$(document).on('click','.uix-page-builder-res-selector li',function(e){e.preventDefault();var $window=$(window),$preview=$('#uix-page-builder-themepreview'),windowWidth=$window.width(),windowHeight=$window.height(),sidebarWidth=(!$preview.hasClass('active'))?$('#uix-page-builder-gridster-wrapper').width():0,w=$(this).data('size')[0],h=($(this).data('size')[1]>windowHeight)?windowHeight:$(this).data('size')[1],t=(windowHeight-h)/2,l=(!$preview.hasClass('active'))?((windowWidth-sidebarWidth)-w)/2:(windowWidth-w)/2;$('.uix-page-builder-res-selector li').removeClass('active');$(this).addClass('active');if(w==0){$preview.css({'width':(windowWidth-sidebarWidth)+'px','height':windowHeight+'px','margin-top':0,'margin-left':0}).removeClass('res');}else{$preview.css({'width':w+'px','height':h+'px','margin-top':t+'px','margin-left':l+'px'}).addClass('res');}});$('#uix-page-builder-visualBuilder-loader, #uix-page-builder-visualBuilder-loader .loader').hide();$(document).on('click','#uix-page-builder-themepreview-btn-close',function(e){e.preventDefault();var oldPo=parseFloat($('#uix-page-builder-themepreview').css('left')),target=$('ul.uix-page-builder-res-selector, .uix-page-builder-gridster-addbtn.visualBuilder, #uix-page-builder-visualBuilder-loader, #uix-page-builder-gridster-wrapper.visualBuilder, #uix-page-builder-themepreview, .uix-page-builder-themepreview-btn, .uix-page-builder-themepreview-btn#uix-page-builder-themepreview-btn-close');if(oldPo==0){target.removeClass('active');}else{target.addClass('active');}
$('.uix-page-builder-res-selector li.active').trigger('click');});$(document).on('mouseenter','.uix-page-builder-visual-mode',function(){var curtitle=$('[name="post_title"]').val().replace(/&/g,'{and}').replace(/ /g,'{space}'),oldhref=$(this).attr('href');if(curtitle.length>0){$(this).attr('href',oldhref+'&post_title='+encodeURI(curtitle))}});$(document).on('mouseenter','#uix-page-builder-gridster-wrapper',function(){$('.uix-page-builder-gridster-widget').removeClass('hover');});$(document).on('mousedown','.uix-page-builder-visual-mode',function(){$(window).unbind();});$(document).on('click','.widget-item-btn',function(e){e.preventDefault();var cur_slug=$(this).data('slug'),cur_rowID=$(this).data('id'),widget_name=$(this).data('name'),ele_target=$(this).data('elements-target'),ele_btn=$('#'+ele_target).find('.add-elements-btn'),cur_defaultvalue=$('#'+ele_target).find('textarea').val();if(ele_btn.css('display')!='none'){ele_btn.after($(this).clone().addClass('used').text(widget_name)).hide();if($('#'+ele_target).find('textarea').length>0){if(cur_defaultvalue.indexOf('uix_pb_section_undefined')>=0){var nv=cur_defaultvalue.replace('uix_pb_section_undefined',cur_slug).replace('uix_pb_undefined',cur_slug+'_temp');$('#'+ele_target).find('textarea').val(nv);gridsterItemSave(cur_rowID);uixPBFormDataSave();}
var new_cur_defaultvalue=$('#'+ele_target).find('textarea').val();if(new_cur_defaultvalue.indexOf(cur_slug)>=0&&new_cur_defaultvalue.indexOf('uix_pb_section_undefined')<0){$('#'+ele_target).addClass('used');}}}
gridsterItemElementsClose();});$(document).on('click','#uix-page-builder-layoutdata, .uix-page-builder-gridster-widget .content-box, .uix-page-builder-gridster .temp-data-1, .uix-page-builder-gridster .temp-data-2, .sortable-list .row textarea',function(){$(this).select();});$(document).on('click','.widget-items-col-container a',function(e){$(this).parent().parent().hide();});$(document).on('click','.add-elements-btn',function(e){e.preventDefault();var modalID='#'+$(this).data('elements');$('.uixpbform-modal-mask').fadeIn('fast');$(modalID).addClass('active');$(modalID).find('.content').animate({scrollTop:10},100);$('html').css('overflow-y','hidden');$('.uixpbform-modal-box .close-uixpbform-modal').on('click',function(e){e.preventDefault();gridsterItemElementsClose();$('.uixpbform-modal-mask').fadeOut('fast');});});$(document).on('click','.uix-page-builder-gridster-widget .dashicons.settings',function(e){e.preventDefault();$('.settings-wrapper').hide();var $set=$(this).next('.settings-wrapper');$set.show();$set.find('.close').on('click',function(e){$set.hide();});});$(document).on('click','.uix-page-builder-gridster-drag',function(e){e.preventDefault();$('.settings-wrapper').hide();});$(document).on('mouseenter','.sortable-list .row',function(e){e.preventDefault();$('.settings-wrapper').hide();});$(document).on('click','.uix-page-builder-gridster-addbtn .export-temp, .uix-page-builder-gridster-addbtn .select-temp, .uix-page-builder-gridster-addbtn .save-temp',function(e){e.preventDefault();var $set=$(this).next('.settings-temp-wrapper');$set.show();if(uix_page_builder_layoutdata.send_string_vb_mode!=1)$('.uixpbform-modal-mask').show();$set.find('.close, .export').on('click',function(){$set.hide();$('.uixpbform-modal-mask').hide();});});$(document).on('click','.uix-page-builder-gridster-addbtn .select-temp',function(e){e.preventDefault();$.ajax({url:ajaxurl,type:'POST',data:{action:'uix_page_builder_metaboxes_loadtemplist_settings',postID:uix_page_builder_layoutdata.send_string_postid,security:uix_page_builder_layoutdata.send_string_nonce},success:function(result){$('#uix-page-builder-templatelist').html(result);if(result==''||result=='<p>Hmm... no templates yet.</p>'){$('#uix-page-builder-templatelist-confirm').hide();}else{$('#uix-page-builder-templatelist-confirm').show();}
return false;},beforeSend:function(){$('#uix-page-builder-templatelist').html(uix_page_builder_layoutdata.send_string_loadlist);$('#uix-page-builder-templatelist-confirm').hide();}});});$(document).on('click','.settings-temp-wrapper .confirm',function(){var $this=$(this),v=$(this).closest('.settings-temp-wrapper').find('[name="temp"]:checked').parent().find('textarea').html();$this.next('.spinner').addClass('is-active');$.post(ajaxurl,{action:'uix_page_builder_metaboxes_loadtemp_settings',curlayoutdata:v,security:uix_page_builder_layoutdata.send_string_nonce},function(response){var data=response.toString().replace(/\\/g,'').replace(/""/g,'').replace(/:,/g,':"",');gridsterEditRow(JSON.parse(data));var settings=jQuery("[name='uix-page-builder-layoutdata']").val();$.post(ajaxurl,{action:'uix_page_builder_metaboxes_save_settings',layoutdata:settings,postID:uix_page_builder_layoutdata.send_string_postid,security:uix_page_builder_layoutdata.send_string_nonce},function(response){});$this.parent().hide();$('.uixpbform-modal-mask').hide();$this.next('.spinner').removeClass('is-active');return false;});return false;});$(document).on('click','.uix-page-builder-gridster-addbtn .save-temp',function(e){e.preventDefault();$(this).next('.settings-temp-wrapper').find('[name="tempname"]').val(uix_page_builder_layoutdata.send_string_name);});$(document).on('click','.settings-temp-wrapper .save',function(e){e.preventDefault();var $this=$(this),v=$("[name='uix-page-builder-layoutdata']").val(),n=$(this).closest('.settings-temp-wrapper').find('[name="tempname"]').val();$this.next('.spinner').addClass('is-active');$.post(ajaxurl,{action:'uix_page_builder_metaboxes_savetemp_settings',curlayoutdata:v,tempname:n,postID:uix_page_builder_layoutdata.send_string_postid,security:uix_page_builder_layoutdata.send_string_nonce},function(response){$this.parent().hide();$('.uixpbform-modal-mask').hide();$this.next('.spinner').removeClass('is-active');});return false;});$(document).ready(function(){var hidedivs=['#postdivrich'],hideID='',selectedElt=$("input[name='uix-page-builder-status']:checked").attr('id'),pbID='#uix_page_builder_page_meta_pagerbuilder_container';$('.postbox').each(function(){if($(this).attr('id').indexOf('dis_page_builder')>=0){hidedivs.push('#'+$(this).attr('id'));}});for(var i=0,len=hidedivs.length;i<len;i++){hideID+=hidedivs[i]+',';}
hideID=hideID.substring(0,hideID.length-1);if(selectedElt=='uix-page-builder-status2'){uix_page_builder_hide();}else{uix_page_builder_show();}
$('#uix-page-builder-status1').on('click',function(){uix_page_builder_show();if(gridsterGetTinymceContent().indexOf('[uix_pb_sections')<0){window.send_to_editor('[uix_pb_sections]');}
if(uix_page_builder_layoutdata.send_string_tempfiles_exists==1){$('[name="page_template"] option[value="page-uix_page_builder.php"]').attr('selected','selected');}});$('#uix-page-builder-status2').on('click',function(){uix_page_builder_hide();if(uix_page_builder_layoutdata.send_string_tempfiles_exists==1){$('[name="page_template"] option[value="default"]').attr('selected','selected');}});function uix_page_builder_hide(){$(hideID).slideDown(300).css('width','100%');$(pbID).slideUp(300);uix_page_builder_init();}
function uix_page_builder_show(){$(hideID).slideUp(300);$(pbID).slideDown(300).css('width','100%');uix_page_builder_init();}
function uix_page_builder_init(){$('html, body').animate({scrollTop:10},100);$('html, body').delay(300).animate({scrollTop:5},100);$('.uix-page-builder-gridster ul').css('width','100%');}});});})(jQuery);function gridsterItemElementsBTStatus(type){jQuery(document).ready(function(){setTimeout(function(){jQuery('.widget-item-btn').each(function(){var cur_slug=jQuery(this).data('slug'),cur_rowID=jQuery(this).data('id'),widget_name=jQuery(this).data('name'),ele_target=jQuery(this).data('elements-target'),$sort_container=jQuery('#'+ele_target),ele_btn=$sort_container.find('.add-elements-btn'),cur_defaultvalue=$sort_container.find('textarea').val();if($sort_container.length>0){if($sort_container.find('textarea').length>0){if(cur_defaultvalue.indexOf(cur_slug)>=0&&cur_defaultvalue.indexOf('uix_pb_section_undefined')<0){if(type==0){ele_btn.after(jQuery(this).clone().addClass('used').text(widget_name)).hide();}
$sort_container.addClass('used');}}}});},100);});}
function gridsterItemElementsClose(){jQuery(document).ready(function(){jQuery('.uixpbform-modal-box').removeClass('active');jQuery('html').css('overflow-y','auto');});}
function gridsterGetTinymceContent(){var editorID='content';if(jQuery('#wp-'+editorID+'-wrap').hasClass("tmce-active"))
var content=tinyMCE.get(editorID).getContent({format:'raw'});else
var content=jQuery('#'+editorID).val();return content;}